From gray@antaire.com Thu May 14 21:21:09 1992
Received: from unido.Germany.EU.net by immd4.informatik.uni-erlangen.de with SMTP;
	id AA09816 (5.61++/7.3m-FAU); Thu, 14 May 92 21:20:47 +0200
Received: from mercury.med.pitt.edu 
	by mail.Germany.EU.net with SMTP (5.65+/UNIDO-2.1.0.b)
	via EUnet for immd4.informatik.uni-erlangen.de
	id AA20534; Thu, 14 May 92 21:21:13 +0200
Received: from antaire.com by mercury.med.pitt.edu with uucp (7.2/4.2)
	id AA09824; Thu, 14 May 92 15:09:34 -0400 (EDT)
Received: by antaire.com (4.1/SMI-4.1)
	id AA14410; Thu, 14 May 92 13:33:39 EDT
Date: Thu, 14 May 92 13:33:39 EDT
From: gray@antaire.com (Gray Watson)
Message-Id: <9205141733.AA14410@antaire.com>
To: jnweiger@immd4.informatik.uni-erlangen.de
Subject: km patch from 3.1.1
Reply-To: gray.watson@antaire.com
Organization: antaire corporation, pittsburgh, pa, usa
Status: OR

Here's the patch for the km capability from ansi.c 3.1.1.

gray

-------------------------------------------------------------------------------

*** ansi.c.ORG	Fri Oct 11 06:27:45 1991
--- ansi.c	Thu May 14 13:20:40 1992
***************
*** 166,172 ****
  static char *TS, *FS, *DS, *VI, *VE, *VS;
  static char *CDC, *CDL, *CAL, *CUP, *CDO, *CLE, *CRI, *CIC;
  static char *attrtab[NATTR];
! static AM, MS, COP;
  int LP;
  /*
   * Do not confuse S0 (es-zero), E0 (e-zero) with SO (es-oh), PO (pe-oh),
--- 166,172 ----
  static char *TS, *FS, *DS, *VI, *VE, *VS;
  static char *CDC, *CDL, *CAL, *CUP, *CDO, *CLE, *CRI, *CIC;
  static char *attrtab[NATTR];
! static AM, KM, MS, COP;
  int LP;
  /*
   * Do not confuse S0 (es-zero), E0 (e-zero) with SO (es-oh), PO (pe-oh),
***************
*** 283,288 ****
--- 283,289 ----
        break;
      }
    AM = e_tgetflag("am");
+   KM = e_tgetflag("km");
    LP = assume_LP || (!extra_incap && !strncmp(termname, "vt", 2))
    		 || !AM || e_tgetflag("LP") || e_tgetflag("xv");
    COP = e_tgetflag("OP");
***************
*** 610,615 ****
--- 611,618 ----
      AddCap("LP:");
    else
      AddCap("am:");
+   if (KM)
+     AddCap("km:");
    if (VB)
      AddCap("vb=\\E[?5h\\E[?5l:");
    if (US)

